---
interface BreadcrumbItem {
  label: string;
  href?: string;
}

interface Props {
  items: BreadcrumbItem[];
}

const { items } = Astro.props;

// Generate BreadcrumbList structured data
const breadcrumbListJsonLd = {
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": items.map((item, index) => ({
    "@type": "ListItem",
    "position": index + 1,
    "name": item.label,
    ...(item.href && { "item": `${Astro.site}${item.href.replace(/^\//, '')}` })
  }))
};
---

<nav aria-label="Breadcrumb" class="bg-[var(--color-surface)] border-b border-gray-200 py-4">
  <div class="container">
    <ol class="flex flex-wrap items-center gap-2 list-none m-0 p-0">
      {items.map((item, index) => (
        <li class="flex items-center gap-2">
          {index < items.length - 1 && item.href ? (
            <>
              <a href={item.href} class="text-[var(--color-text-muted)] no-underline text-sm sm:text-xs transition-colors hover:text-[var(--color-primary)] hover:underline">{item.label}</a>
              <span class="text-[var(--color-text-muted)] text-sm sm:text-xs select-none" aria-hidden="true">/</span>
            </>
          ) : (
            <span class="text-[var(--color-text)] text-sm sm:text-xs font-medium" aria-current="page">{item.label}</span>
          )}
        </li>
      ))}
    </ol>
  </div>

  <!-- Breadcrumb Structured Data -->
  <script is:inline type="application/ld+json" set:html={JSON.stringify(breadcrumbListJsonLd)} />
</nav>
