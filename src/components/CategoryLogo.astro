---
interface Props {
  categoryName: string;
  logoPaths: string[];  // [SVG, PNG, WebP]
  class?: string;
}

const { categoryName, logoPaths, class: className = '' } = Astro.props;
---

<div class={`category-logo ${className}`}>
  <img
    src={logoPaths[0]}
    alt={`${categoryName} icon`}
    onerror={`
      if (!this.dataset.tried) {
        this.dataset.tried = '1';
        this.src = '${logoPaths[1]}';
      } else if (this.dataset.tried === '1') {
        this.dataset.tried = '2';
        this.src = '${logoPaths[2]}';
      } else {
        this.style.display='none';
        this.nextElementSibling.style.display='flex';
      }
    `}
    class="w-full h-full object-contain"
  />
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="28"
    height="28"
    viewBox="0 0 24 24"
    fill="none"
    stroke="currentColor"
    stroke-width="2"
    class="w-full h-full"
    style="display: none;"
  >
    <rect x="3" y="3" width="18" height="18" rx="2" ry="2" />
    <line x1="9" y1="3" x2="9" y2="21" />
  </svg>
</div>
